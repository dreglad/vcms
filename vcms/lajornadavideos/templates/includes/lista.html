{% load el_pagination_tags %}
{% load videos_tags %}
{% load cache %}

{% with page_param=display.slug|default:"pag" mostrar_maximo_final=display.mostrar_maximo|default:"12" %}
{# {% cache 3600 pagina display %} #}

{% if mostrar_maximo %}
  {% paginate mostrar_maximo videos using page_param %}
{% else %}
  {% paginate mostrar_maximo_final videos using page_param %}
{% endif %}

<section class="lista videos margen-{{ display.margen }} tema-{{ display.tema }}
                publicidad-{{ display.mostrar_publicidad }}
                laoyut-{{ display.layout }}">
  {% if display.mostrar_nombre or mostrar_nombre %}
  {% if videos %}
    <h2>
      <a title="{{ nombre }}"
          {% if listado.lista.pagina %}
            href="/secciones/{{ listado.lista.pagina.slug }}"
          {% else %}{% if listado.lista %}
            href="/listas/{{ listado.lista.slug }}"
          {% else %}
            href="#"
          {% endif %}{% endif %}>
          {{ nombre }}
      </a>
    </h2>
  {% endif %}
  {% endif %}

  {% if display.mostrar_descripcion or mostrar_descripcion %}
    <div class="descripcion"><p>{{ descripcion|safe }}</p></div>
  {% endif %}


  <ol class="container-fluid endless_page_template">

  {% if videos|length_is:"1" or display.layout == "c100" %}

    <li class="grid-sizer c100"></li>
    {% with importante=True %}
    {% for video in videos %}
      <li class="c100">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}
    {% endwith %}

  {% else %}{% if videos|length_is:"2" or display.layout == 'c50' %}

    <li class="grid-sizer c25"></li>
    {% with importante=True %}
    {% for video in videos %}
      <li class="c50">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}
    {% endwith %}


  {% else %}{% if display.layout == '3a' %}

    <li class="grid-sizer c33"></li>
    {% for video in videos|slice:":1" %}
      {% with importante=True %}
      <li class="c66">{% include "includes/video_en_lista.html" %}</li>
      {% endwith %}
    {% endfor %}
    {% for video in videos|slice:"1:" %}
      <li class="c33">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}


  {% else %}{% if display.layout == '3b' %}

    <li class="grid-sizer c33"></li>
    {% for video in videos|slice:":2" %}
      {% with importante=True %}
      <li class="c66">{% include "includes/video_en_lista.html" %}</li>
      {% endwith %}
    {% endfor %}
    {% for video in videos|slice:"2:" %}
      <li class="c33">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}


  {% else %}{% if videos|length_is:"3" or display.layout == 'c33' %}

    <li class="grid-sizer c33"></li>
    {% for video in videos %}
      <li class="c33">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}


  {% else %}{% if videos|length_is:"5" or display.layout == "4a" %}
    <li class="grid-sizer c25"></li>
    {% for video in videos|slice:":1" %}
      {% with importante=True %}
      <li class="c50">{% include "includes/video_en_lista.html" %}</li>
      {% endwith %}
    {% endfor %}
    {% for video in videos|slice:"1:" %}
      <li class="c25">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}


  {% else %}{% if videos|length_is:"6" or display.layout == "4b" %}
    <li class="grid-sizer c25"></li>
    {% for video in videos|slice:":1" %}
      {% with importante=True %}
      <li class="c50">{% include "includes/video_en_lista.html" %}</li>
      {% endwith %}
    {% endfor %}
    {% for video in videos|slice:"1:3" %}
      <li class="c25">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}
    {% for video in videos|slice:"3:4" %}
      {% with importante=True %}
      <li class="c50">{% include "includes/video_en_lista.html" %}</li>
      {% endwith %}
    {% endfor %}
    {% for video in videos|slice:"4:6" %}
      <li class="c25">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}
    {% for video in videos|slice:"6:" %}
      <li class="c25">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}

  {% else %}

    <li class="grid-sizer c25"></li>
    {% for video in videos %}
      <li class="c25">{% include "includes/video_en_lista.html" %}</li>
    {% endfor %}

  {% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}
  </ol>
</section>

{% if display.mostrar_paginacion or mostrar_paginacion %}{% show_more display.texto_paginacion "cargando..." %}{% endif %}

{# {% endcache %} #}
{% endwith %}
